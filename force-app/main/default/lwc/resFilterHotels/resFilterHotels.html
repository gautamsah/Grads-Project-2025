<template>
    <lightning-layout class="search">
        <lightning-layout-item size="12" class="search-container slds-m-bottom_large">
            <c-res-search-component local-storage-start-date={localStorageStartDate}
                local-storage-end-date={localStorageEndDate} local-storage-input={localStorageCity}
                picklist-values={cities} onbookbuttonclick={handleBookNow} placeholder-text={placeholder}
                button-label="Search Hotels"></c-res-search-component>
        </lightning-layout-item>
    </lightning-layout>

    <button class="btn-filter" style="width: 70%;" onclick={handleFilter}>Filter</button>
    <lightning-layout class="filter-hotel-container">
        <lightning-layout-item class={filterCss} size="3" medium-device-size="6" large-device-size="3">
            <!-- <c-res-search-filter onkeychange={searchFilter}></c-res-search-filter> -->

            <lightning-layout class="search-filter-outer-container" multiple-rows="true">
                <lightning-layout-item size="12">
                    <span class="search-filter-search-font">Search</span>
                </lightning-layout-item>
                <lightning-layout-item size="12" class="search-filter-input-class">
                    <input  type="text" name="searched-value" placeholder="Search For Hotels..." class="res-search-input" onkeyup={searchFilter}></input>
                </lightning-layout-item>
            </lightning-layout>


            <br>
            <lightning-layout multiple-rows="true" class="price-container">
                <lightning-layout-item size="12" class="font-container">
                    Price
                </lightning-layout-item>
                <lightning-layout-item size="12" class="price-range-container">
                    <p style="color: black;font-size:16px">${priceValue} & Below</p>
                    <input class="slider" type="range" min="0" max="300" onchange={priceFilter}
                        value={priceValue}></input>
                </lightning-layout-item>
            </lightning-layout>
            <br>
            <!-- <c-res-review-filter onchangeevent={reviewFilter}></c-res-review-filter> -->

            <lightning-layout class="review-outer-container" multiple-rows="true">
                <lightning-layout-item size="12">
                    <p class="review-big-font">Reviews</p>
                </lightning-layout-item>
                <lightning-layout-item size="12" padding="around-small" class="radio-buttons">
                    <div class="radio-label">
                        <input type="radio" name="btn" id="5star" data-id="checkbox" onchange={reviewFilter} value="5"
                            class="review-radio-button">
                        <label for="5star">5 Stars</label>
                    </div>
                    <br>
                    <div class="radio-label">
                        <input type="radio" name="btn" id="4star" data-id="checkbox" onchange={reviewFilter} value="4"
                            class="review-radio-button">
                        <label for="4star">4 Stars & Up</label>
                    </div>
                    <br>
                    <div class="radio-label">
                        <input type="radio" name="btn" id="3star" data-id="checkbox" onchange={reviewFilter} value="3"
                            class="review-radio-button">
                        <label for="3star">3 Stars & Up</label>
                    </div>
                    <br>
                    <div class="radio-label">
                        <input type="radio" name="btn" id="2star" data-id="checkbox" onchange={reviewFilter} value="2"
                            class="review-radio-button">
                        <label for="2star">2 Stars & Up</label>
                    </div>
                    <br>
                    <div class="radio-label">
                        <input type="radio" name="btn" id="1star" data-id="checkbox" onchange={reviewFilter} value="1"
                            class="review-radio-button">
                        <label for="1star">1 Stars & Up</label>
                    </div>

                </lightning-layout-item>
            </lightning-layout>
            <br><br>
            <button class="btn-clear-filter" onclick={clearFilter}>Clear Filter</button>
            <br>
            <button class="btn-filter" style="width: 75%;" onclick={handleClose}>Close</button>
        </lightning-layout-item>


        <template if:true={skeleton}>
            <lightning-layout-item size="9" class="card-container" medium-device-size="6" large-device-size="9">
                <lightning-layout multiple-rows="true">
                    <template for:each={skeletonCollection} for:item="hotel">
                        <lightning-layout-item size="12" small-device-size="12" medium-device-size="12"
                            large-device-size="4" key={hotel.Id} multiple-rows="true" class="outer-container">

                            <c-res-hotel-card-skeleton></c-res-hotel-card-skeleton>

                        </lightning-layout-item>
                    </template>
                </lightning-layout>
            </lightning-layout-item>
        </template>

        <template if:false={skeleton}>


            <lightning-layout-item size="9" class="card-container" medium-device-size="6" large-device-size="9">
                <template if:true={isHotelAvailable}>
                    <lightning-layout multiple-rows="true">
                        <template for:each={filtertour} for:item="hotel">
                            <lightning-layout-item size="12" small-device-size="12" medium-device-size="12"
                                large-device-size="4" key={hotel.details.Id} multiple-rows="true"
                                class="outer-container">
                                <!-- <p>rating :- {hotel.details.Overall_Rating__c}</p> -->
                                <c-res-single-hotel-card hotel-unique-name={hotel.details.Unique_Hotel_Name__c}
                                    img-name={hotel.details.Banner_Photo_Url__c} hotel-name={hotel.details.Name}
                                    rating={hotel.details.Overall_Rating__c} price={hotel.details.Price__c}
                                    city={hotel.details.City__c} state={hotel.details.State__c}
                                    book-btn={hotel.availability} onclick={gotodetailpage}>
                                </c-res-single-hotel-card>
                            </lightning-layout-item>
                        </template>
                    </lightning-layout>
                </template>
                <template if:false={isHotelAvailable}>
                    <div class="hotel-availability-container">
                        <div class="hotel-availability-content">
                            <div class="hotel-availability-text-section">
                                <h1>Hotel Not Available</h1>
                                <p>The hotel you're looking for could not be found.</p>
                                <button class="hotel-availability-button" onclick={clearFilter}>Clear All
                                    Filter</button>
                            </div>
                        </div>
                    </div>
                </template>
            </lightning-layout-item>
        </template>
    </lightning-layout>
</template>